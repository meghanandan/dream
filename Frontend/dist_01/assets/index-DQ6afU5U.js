import{a1 as B,a2 as N,r as s,bp as X,j as e,aK as V,aL as L,aM as H,d as F,ab as q,T as A,W as k,ae as P,am as K,aP as M,h as j,bq as Z,br as ee,n as _,v as O,bs as se,bt as U,aD as te,aR as ae,aq as ne,aS as ie,aT as le,aU as D,aV as n,aW as re,aE as oe,aY as de,b7 as ce,bu as he,H as ue,C as xe}from"./index-cVH_xp6I.js";import{C as je}from"./CustomFieldDialog-DSPkbHcw.js";import{V as R}from"./VisibilityOff-9P1LaXwE.js";import{E as me}from"./EditFieldDialog-CYDYzGaQ.js";import{D as ge}from"./DialogContentText-Ep2To2m5.js";import"./formik.esm-63xKD07Q.js";import"./Radio-CrP7E0ac.js";import"./index.esm-DW-FEPUt.js";const pe=({open:i,onClose:l})=>{const r=B(),{apiSetting:c,loading:d,error:b}=N(o=>o.settingApi),[h,y]=s.useState(""),[u,m]=s.useState(""),[T,g]=s.useState(!1),[p,C]=s.useState(!1),S=()=>C(!p),x=()=>g(!T),v=h.trim()&&u.trim();s.useEffect(()=>{i&&r(X())},[i,r]),s.useEffect(()=>{c&&(y(c.apiKey||""),m(c.systemUrl||""))},[c]);const f=async()=>{try{await r(Z({apiKey:h,systemUrl:u})),l()}catch(o){console.error("Error updating setting:",o)}};return e.jsxs(V,{open:i,onClose:l,fullWidth:!0,maxWidth:"sm",children:[e.jsx(L,{children:"Connect Third-Party System"}),e.jsxs(H,{children:[d&&e.jsx(F,{sx:{display:"block",margin:"auto",mt:2}}),b&&e.jsx(q,{severity:"error",children:b}),!d&&e.jsxs(e.Fragment,{children:[e.jsx(A,{label:"API Key",fullWidth:!0,variant:"outlined",value:h,type:p?"text":"password",onChange:o=>y(o.target.value),margin:"normal",InputProps:{endAdornment:e.jsx(k,{position:"end",children:e.jsx(P,{onClick:S,edge:"end",children:p?e.jsx(R,{}):e.jsx(K,{})})})}}),e.jsx(A,{label:"System URL",fullWidth:!0,variant:"outlined",value:u,onChange:o=>m(o.target.value),margin:"normal",InputProps:{endAdornment:e.jsx(k,{position:"end",children:e.jsx(P,{onClick:x,edge:"end",children:T?e.jsx(R,{}):e.jsx(K,{})})})}})]})]}),e.jsxs(M,{children:[e.jsx(j,{onClick:l,color:"secondary",disabled:d,children:"Cancel"}),e.jsx(j,{onClick:f,color:"primary",variant:"contained",disabled:!v||d,children:d?e.jsx(F,{size:24}):"Update"})]})]})},Ce=({open:i,onClose:l,onDelete:r,fieldName:c})=>e.jsxs(V,{open:i,onClose:l,children:[e.jsx(L,{children:"Confirm Delete"}),e.jsx(H,{children:e.jsx(ge,{children:"Are you sure you want to delete?"})}),e.jsxs(M,{children:[e.jsx(j,{onClick:l,children:"Cancel"}),e.jsx(j,{onClick:r,color:"error",children:"Delete"})]})]});function W({children:i,value:l,index:r}){return l===r&&e.jsx(_,{sx:{mt:2},children:i})}function fe(){const i=B(),[l,r]=s.useState(!1),[c,d]=s.useState(!1),[b,h]=s.useState(!1),[y,u]=s.useState(!1),[m,T]=s.useState({}),[g,p]=s.useState(""),[C,S]=s.useState(0),[x,v]=s.useState(5),[f,o]=s.useState(0),{fields:w,loading:z,error:I}=N(t=>t.settingCustomField);s.useEffect(()=>{i(ee())},[i]);const E=s.useMemo(()=>w.filter(t=>[t.fieldName,t.fieldType,t.label,t.placeholder].some(a=>a==null?void 0:a.toLowerCase().includes(g.toLowerCase()))),[g,w]),G=(t,a)=>S(a),Y=t=>{v(parseInt(t.target.value,10)),S(0)},$=async()=>{await i(he(m.id)),d(!1)},J=(t,a)=>o(a),Q=()=>{if(z)return e.jsx(F,{sx:{display:"block",margin:"auto",mt:2}});if(I)return e.jsx(q,{severity:"error",children:I});const t=E.slice(C*x,C*x+x);return e.jsxs(e.Fragment,{children:[e.jsx(ae,{component:ne,sx:{mt:2},children:e.jsxs(ie,{children:[e.jsx(le,{children:e.jsxs(D,{children:[e.jsx(n,{children:"Order"}),e.jsx(n,{children:"Name"}),e.jsx(n,{children:"Label"}),e.jsx(n,{children:"Type"}),e.jsx(n,{children:"Placeholder"}),e.jsx(n,{children:"Actions"})]})}),e.jsxs(re,{children:[t.map(a=>e.jsxs(D,{children:[e.jsx(n,{children:a.order}),e.jsx(n,{children:a.fieldName}),e.jsx(n,{children:a.label}),e.jsx(n,{children:a.fieldType}),e.jsx(n,{children:a.placeholder}),e.jsxs(n,{children:[e.jsx(P,{onClick:()=>r(!0),children:e.jsx(oe,{})}),e.jsx(P,{onClick:()=>d(!0),children:e.jsx(de,{})})]})]},a.id)),t.length===0&&e.jsx(D,{children:e.jsx(n,{colSpan:6,align:"center",children:"No matching fields found."})})]})]})}),e.jsx(ce,{component:"div",count:E.length,page:C,onPageChange:G,rowsPerPage:x,onRowsPerPageChange:Y,rowsPerPageOptions:[5,10,25]})]})};return e.jsxs(_,{sx:{padding:4},children:[e.jsx(O,{variant:"h4",gutterBottom:!0,children:"Settings"}),e.jsxs(se,{value:f,onChange:J,sx:{mb:2},children:[e.jsx(U,{label:"Custom Fields"}),e.jsx(U,{label:"API Configuration"})]}),e.jsxs(W,{value:f,index:0,children:[e.jsx(j,{variant:"contained",startIcon:e.jsx(te,{}),onClick:()=>h(!0),sx:{mt:2},children:"Add Custom Field"}),e.jsx(A,{fullWidth:!0,label:"Search Custom Fields",variant:"outlined",sx:{mt:2},value:g,onChange:t=>p(t.target.value)}),Q()]}),e.jsxs(W,{value:f,index:1,children:[e.jsx(O,{variant:"h6",gutterBottom:!0,children:"API Connections"}),e.jsx(j,{variant:"contained",onClick:()=>u(!0),children:"Connect Third-Party System"})]}),e.jsx(je,{open:b,onClose:()=>h(!1)}),e.jsx(pe,{open:y,onClose:()=>u(!1)}),e.jsx(me,{open:l,onClose:()=>r(!1),data:m}),e.jsx(Ce,{open:c,onClose:()=>d(!1),onDelete:$})]})}const be={title:`Disputes - ${xe.site.name}`};function we(){return e.jsxs(e.Fragment,{children:[e.jsx(ue,{children:e.jsxs("title",{children:[" ",be.title]})}),e.jsx(fe,{})]})}export{we as default};
