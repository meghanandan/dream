import{ap as W,j as e,b3 as se,b4 as ne,r as s,u as le,_ as ie,c as I,s as q,b5 as O,e as Q,f as ce,t as de,ao as pe,al as he,a1 as me,a2 as ue,b1 as xe,b2 as H,ah as M,n as _,aK as ge,aL as be,aM as je,aP as ye,h as x,w as Te,b6 as Ce,v as g,aq as F,T as ve,aA as f,aR as fe,aS as Se,aT as we,aU as U,aV as d,aW as De,ae as $,aE as ke,aj as _e,aY as Le,b7 as Pe,b8 as Ie,H as Ae,C as Re}from"./index-cVH_xp6I.js";import{D as ze}from"./DialogContentText-Ep2To2m5.js";const Be=W(e.jsx("path",{d:"M20 12l-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8 8-8z"}),"ArrowDownward");function Ee(t){return ne("MuiTableSortLabel",t)}const L=se("MuiTableSortLabel",["root","active","icon","iconDirectionDesc","iconDirectionAsc"]),Ne=["active","children","className","direction","hideSortIcon","IconComponent"],Oe=t=>{const{classes:o,direction:c,active:n}=t,p={root:["root",n&&"active"],icon:["icon",`iconDirection${Q(c)}`]};return ce(p,Ee,o)},He=q(de,{name:"MuiTableSortLabel",slot:"Root",overridesResolver:(t,o)=>{const{ownerState:c}=t;return[o.root,c.active&&o.active]}})(({theme:t})=>({cursor:"pointer",display:"inline-flex",justifyContent:"flex-start",flexDirection:"inherit",alignItems:"center","&:focus":{color:(t.vars||t).palette.text.secondary},"&:hover":{color:(t.vars||t).palette.text.secondary,[`& .${L.icon}`]:{opacity:.5}},[`&.${L.active}`]:{color:(t.vars||t).palette.text.primary,[`& .${L.icon}`]:{opacity:1,color:(t.vars||t).palette.text.secondary}}})),Me=q("span",{name:"MuiTableSortLabel",slot:"Icon",overridesResolver:(t,o)=>{const{ownerState:c}=t;return[o.icon,o[`iconDirection${Q(c.direction)}`]]}})(({theme:t,ownerState:o})=>I({fontSize:18,marginRight:4,marginLeft:4,opacity:0,transition:t.transitions.create(["opacity","transform"],{duration:t.transitions.duration.shorter}),userSelect:"none"},o.direction==="desc"&&{transform:"rotate(0deg)"},o.direction==="asc"&&{transform:"rotate(180deg)"})),P=s.forwardRef(function(o,c){const n=le({props:o,name:"MuiTableSortLabel"}),{active:p=!1,children:m,className:b,direction:u="asc",hideSortIcon:j=!1,IconComponent:y=Be}=n,A=ie(n,Ne),T=I({},n,{active:p,direction:u,hideSortIcon:j,IconComponent:y}),S=Oe(T);return e.jsxs(He,I({className:O(S.root,b),component:"span",disableRipple:!0,ownerState:T,ref:c},A,{children:[m,j&&!p?null:e.jsx(Me,{as:y,className:O(S.icon),ownerState:T})]}))}),Fe=W(e.jsx("path",{d:"M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4zm-1-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8"}),"AddCircleOutline");function Ue(){const t=pe(),o=he();me();const{templates:c,loading:n,error:p}=ue(a=>a.templates),[m,b]=s.useState(0),[u,j]=s.useState(10),[y,A]=s.useState(0),[T,S]=s.useState(""),[C,V]=s.useState([]),[w,G]=s.useState(""),J=xe.getJson("userData"),[K,R]=s.useState(!1),[z,B]=s.useState(null),[h,Y]=s.useState("asc"),[l,X]=s.useState("name");s.useEffect(()=>{const a=setTimeout(()=>{E()},500);return()=>clearTimeout(a)},[w,m,u,h,l]);const E=()=>{var i,v;const a={search_key:w,page_number:m+1,page_size:u,org_code:J.organization,sort_field:l,sort_order:h};try{H(M.auth.getAll,"POST",a).then(r=>{r.status?V(r.data):console.log("No data found.")}).catch(r=>{console.error("Error while fetching master pages:",r)})}catch(r){console.error("Error while adding cluster:",(v=(i=r.response)==null?void 0:i.data)==null?void 0:v.message)}},N=()=>{o("/template/create")},Z=a=>{B(a),R(!0)},D=()=>{R(!1),B(null)},ee=()=>{var a,i;if(z){const v={id:z};try{H(M.auth.deleteTemplate,"POST",v).then(r=>{r.status?E():console.log("No data found.")}).catch(r=>{console.error("Error while deleting template:",r)})}catch(r){console.error("Error while deleting template:",(i=(a=r.response)==null?void 0:a.data)==null?void 0:i.message)}}D()},te=(a,i)=>{b(i)},ae=a=>{j(parseInt(a.target.value,10)),b(0)},oe=a=>{Y(l===a&&h==="asc"?"desc":"asc"),X(a)},k=a=>i=>{oe(a)},re=[e.jsx(Ie,{underline:"hover",color:"inherit",to:"/home",children:"Home"},"1"),e.jsx(g,{sx:{color:"text.primary"},children:"Templates"},"3")];return e.jsxs(_,{sx:{px:3,py:2,minHeight:"100vh"},children:[e.jsxs(ge,{open:K,onClose:D,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[e.jsx(be,{id:"alert-dialog-title",children:"Confirm Delete"}),e.jsx(je,{children:e.jsx(ze,{id:"alert-dialog-description",children:"Are you sure you want to delete this template? This action cannot be undone."})}),e.jsxs(ye,{children:[e.jsx(x,{onClick:ee,color:"error",autoFocus:!0,children:"Delete"}),e.jsx(x,{onClick:D,color:"primary",children:"Cancel"})]})]}),e.jsx(Te,{spacing:1,children:e.jsx(Ce,{separator:"â€º","aria-label":"breadcrumb",children:re})}),e.jsx(g,{variant:"h4",gutterBottom:!0,children:"Templates"}),e.jsx(F,{children:e.jsxs(_,{sx:{display:"flex",justifyContent:"space-between",p:1,mb:2,boxShadow:3},children:[e.jsx(ve,{size:"small",label:"Search Templates",variant:"outlined",value:w,onChange:a=>G(a.target.value),sx:{width:"60%"}}),e.jsxs(f,{title:"Template Library",children:[e.jsx(x,{variant:"contained",size:"small",sx:{mr:1,backgroundColor:t.palette.primary.main,"&:hover":{backgroundColor:t.palette.primary.dark}},children:"Library"}),e.jsx(x,{variant:"contained",size:"small",onClick:N,sx:{backgroundColor:t.palette.primary.main,"&:hover":{backgroundColor:t.palette.primary.dark}},children:"Create Template"})]})]})}),n&&e.jsx(g,{variant:"body1",children:"Loading templates..."}),!n&&!p&&C.length===0&&e.jsxs(_,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"40vh",textAlign:"center",color:"text.secondary",gap:2},children:[e.jsx(Fe,{sx:{fontSize:60,color:"primary.main"}}),e.jsx(g,{variant:"h6",gutterBottom:!0,children:"No Templates Found"}),e.jsx(g,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"It looks like there are no templates available yet. Start by creating a new one!"}),e.jsx(f,{title:"Create a new template",children:e.jsx(x,{variant:"contained",c:!0,sx:{backgroundColor:t.palette.primary.main,"&:hover":{backgroundColor:t.palette.primary.dark}},onClick:N,children:"Create Template"})})]}),!n&&C.length>0&&e.jsxs(F,{sx:{width:"100%",overflow:"hidden",mb:2,boxShadow:4},children:[e.jsx(fe,{children:e.jsxs(Se,{stickyHeader:!0,"aria-label":"templates table",children:[e.jsx(we,{children:e.jsxs(U,{children:[e.jsx(d,{sx:{backgroundColor:t.palette.primary.main,color:t.palette.primary.contrastText},children:e.jsx(P,{active:l==="name",direction:l==="name"?h:"asc",onClick:k("name"),sx:{color:"inherit !important"},children:"Template Name"})}),e.jsx(d,{sx:{backgroundColor:t.palette.primary.main,color:t.palette.primary.contrastText},children:e.jsx(P,{active:l==="template_name",direction:l==="template_name"?h:"asc",onClick:k("template_name"),sx:{color:"inherit !important"},children:"Type"})}),e.jsx(d,{sx:{backgroundColor:t.palette.primary.main,color:t.palette.primary.contrastText},children:e.jsx(P,{active:l==="work_flow_name",direction:l==="work_flow_name"?h:"asc",onClick:k("work_flow_name"),sx:{color:"inherit !important"},children:"Workflow"})}),e.jsx(d,{align:"right",sx:{backgroundColor:t.palette.primary.main,color:t.palette.primary.contrastText},children:"Actions"})]})}),e.jsx(De,{children:C.map(a=>e.jsxs(U,{hover:!0,children:[e.jsx(d,{component:"th",scope:"row",children:a.name.charAt(0).toUpperCase()+a.name.slice(1).toLowerCase()}),e.jsx(d,{children:a.template_name}),e.jsx(d,{children:a.work_flow_name}),e.jsxs(d,{align:"right",children:[e.jsx(f,{title:"Edit Template",children:e.jsx($,{size:"small",title:"Edit",onClick:()=>{o(_e.template.edit(a.id))},color:"primary",children:e.jsx(ke,{})})}),e.jsx(f,{title:"Delete Template",children:e.jsx($,{size:"small",title:"Delete",onClick:()=>{Z(a.id)},color:"error",children:e.jsx(Le,{})})})]})]},a.id))})]})}),e.jsx(Pe,{rowsPerPageOptions:[5,10,25],component:"div",count:y||C.length,rowsPerPage:u,page:m,onPageChange:te,onRowsPerPageChange:ae})]})]})}const $e={title:`Templates - ${Re.site.name}`};function Qe(){return e.jsxs(e.Fragment,{children:[e.jsx(Ae,{children:e.jsxs("title",{children:[" ",$e.title]})}),e.jsx(Ue,{})]})}export{Qe as default};
